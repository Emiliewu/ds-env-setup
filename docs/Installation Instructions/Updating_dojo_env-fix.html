
<h1>Updating to New dojo-env</h1>
<ul>
	<li>If you have already installed your dojo-env and wish to update to the new version, you must first remove the
		current dojo-env from your computer.<ul>
			<li><strong>Note: the new version of dojo-env was released in July 2022. </strong>If you installed your
				environment in July or later you already have the updated dojo-env.</li>
		</ul>
	</li>
	<li><strong>The benefits of upgrading to the new dojo-env:</strong>
		<ul>
			<li>New sklearn v1.1 with simplified column transformer feature names!</li>
			<li>Jupyter Lab added</li>
		</ul>
	</li>
	<ul>
		<li>New Packages and Tools Included:</li>
		<ul>
			<li>nbdime: Version control for jupyter notebooks. </li>
			<li>Model Explainer Packages (SHAP, Lime, Yellowbrick)</li>
			<li>Stack 2 &amp; 3 Packages Previously Not Included:<ul>
					<li>Tensorflow</li>
					<li>xgboost</li>
					<li>lightbgm</li>
				</ul>
			</li>
			<li>Pandas Profiling (incredibly powerful all-in-one EDA report)</li>
			<li>Time Series Modeling:<ul>
					<li>pmdarima</li>
					<li>prohpet</li>
					<li>sktime (though still some issues to resolve)</li>
				</ul>
			</li>
			<li>And more!</li>
		</ul>
	</ul>
</ul>
<h4>IMPORTANT NOTE FOR MAC USERS WITH AN APPLE CHIP (M1, M1Pro, M2, etc)!</h4>
<p>The original v1 of dojo-env did not fully support Apple processors, but the new dojo-env does. HOWEVER, in order to
	do so, <strong>Mac users with an Apple chip need to UNINSTALL ANACONDA and switch to using Miniforge</strong>. </p>
<p><dfn style="color: rgb(192, 80, 77);"><strong>Please see "Step 1 - MacOS (Apple Chip)" and scroll to the bottom for
			the UNINSTALLING ANACONDA instructions.<br> </strong>IT IS CRITICAL THAT YOU DO THIS OR IT MAY PERMANENTLY
		BREAK YOUR ENVIRONMENT!</dfn></p>
<p></p>
<blockquote><strong>NOTE: there is an abbreviated summary of commands for this process at the bottom of this page for
		convenience.</strong></blockquote>
<h2>Step 1: Remove Your Old dojo-env</h2>
<ul>
	<li>
		<ol>
			<li>Open your terminal/GitBash</li>
			<li>Deactivate<code>dojo-env</code>: <ol>
					<li>Type <code>conda activate base</code> (or source activate base if you are on older versions of
						windows) <ol>
							<li>Your terminal should now say <code>(base)</code> next to your prompt instead of
								<code>(dojo-env)</code>.</li>
						</ol>
					</li>
				</ol>
			</li>
			<li>Remove the old <code>dojo-env</code> using the command:</li>
		</ol>
	</li>
</ul>
<pre class="rainbow" data-language="ruby">conda remove --name dojo-env --all
</pre>
<p> Enter <code>y</code> to approve the removal of the environment and hit enter.<br></p>
<p> 4. Wait for the env to be removed.</p>
<p> This will delete all of the files associated with JUST our <code>dojo-env</code>. </p>
<p> Anaconda &amp; GitBash will still be installed. We will just need to re-install our <code>dojo-env</code></p>
<p><br></p>
<h2>Step 2: Clone the updated dojo-env-setup repo </h2>
<ol>
	<li>To avoid merge conflicts when pulling the updated repository, <strong>you should remove your old clone of the
			dojo-env-setup repo </strong>and then clone it again.<ol>
			<li>In GitHubDesktop, switch to the dojo-env-setup repository in the Current Repo drop down menu (top left).
				Once you're in dojo-env-setup, click on the "Repository" menu and select "Remove" &gt; check Move to
				Trash/Recycle Bin.</li>
		</ol>
	</li>
	<li>Navigate to the dojo-env-setup repo: <a href="https://github.com/coding-dojo-data-science/dojo-env-setup"
			target="_blank">https://github.com/coding-dojo-data-science/dojo-env-setup</a></li>
	<li><strong>Clone the Repository to Your Computer:</strong>
		<ol>
			<li>Click the green Code button and select "Open in GitHub Desktop. "</li>
			<li>If you still have your previously cloned copy, GitHub Desktop should show a # and down arrow on the top
				right corner where it should say "Fetch Origin".<ol>
					<li>Press the button to "Fetch Origin", which will download the updated environment files. </li>
					<li>You may need to press it again if it changes to "Pull Origin"</li>
				</ol>
			</li>
			<li>If you've updated the repo successfully there should be no remaining #'s or arrows on the top right
				corner.<ol>
					<li>If so, click on the Repository menu &gt; Open in Terminal (or Open in GitBash).</li>
				</ol>
			</li>
		</ol>
	</li>
</ol>
<p><br></p>
<h2>Step 3: (Re)Create Your dojo-env using the updated repo</h2>
<ol>
	<li>Run the same commands from the original step "2. Setting Up Your <code>dojo-env</code> Environment" (summarized
		below).<ol>
			<li>If you are unsure about which version of the summary instructions below to use, please go to the
				original Step 2 lesson for your specific OS and follow those steps again. </li>
		</ol>
	</li>
	<li><strong>"Step 2: Setting Up Your Dojo-Env" Summary:</strong>
		<ol>
			<li>Depending on your OS and processor, you will use a different environment file in the conda env create
				command. <ol>
					<li>In the table below find the environment yml file name that is correct for your computer/OS.</li>
				</ol>
			</li>
		</ol>
	</li>
</ol>
<p>Note: Whenever the instructions below refer to your &lt;ENV_FILE&gt; below, it means the filename from the following
	list (without &lt; &gt;).</p>
<table>
	<tbody>
		<tr>
			<td><strong>Computer/OS Type</strong></td>
			<td><strong>Environment File Name</strong></td>
		</tr>
		<tr>
			<td>Windows </td>
			<td>environment_windows.yml</td>
		</tr>
		<tr>
			<td>MacOS with an Intel Processor</td>
			<td>environment_mac_intel.yml</td>
		</tr>
		<tr>
			<td>MacOS with an Apple Chip (m1, m1pro, m2,etc)</td>
			<td>environment_mac_mchip.yml</td>
		</tr>
	</tbody>
</table>
<ul>
	<li>Make sure you are still using a terminal inside the folder for the dojo-env-setup (pwd)</li>
	<li>Run the following command (replace &lt;ENV_FILE&gt; with your filename from the table above)</li>
</ul>
<pre class="rainbow" data-language="ruby">conda env create -f &lt;env_file&gt;
## Env Creation Commands by OS
# Windows 
conda env create -f environment_windows.yml
# Mac - Intel Processor 
conda env create -f environment_mac_intel.yml
# Mac - Apple Chip 
conda env create -f environment_mac_mchip.yml</pre>
<ul>
	<li><strong>Wait (patiently) for the dojo-env to be created. </strong>
		<ul>
			<li>Note: the new environment includes many additional tools and can take anywhere from 3-20 minutes to
				finish downloading and installing the packages for the new environment.</li>
		</ul>
	</li>
	<li><strong>Once its complete, run the following "conda activate dojo-env" command:</strong></li>
</ul>
<pre class="rainbow" data-language="ruby">conda activate dojo-env</pre>
<ul>
	<li><strong>Note for Windows users:</strong>
		<ul>
			<li> if you see a message that says "your terminal is not set up for conda activate", change the command to
				"source activate"</li>
		</ul>
	</li>
</ul>
<pre class="rainbow" data-language="ruby">source activate dojo-env</pre>
<ul>
	<li><strong>You should now see "(dojo-env)" next to your prompt in your terminal </strong>(may be above the prompt,
		on the left, or on the right depending on your OS)<br><img
			src="../images/lp/confirm_dojo_env.png"
			width="363" height="80" style="width: 363px; height: 80px;"></li>
</ul>
<ul>
	<li>After confirming you now see (dojo-env) displayed next to your prompt:<ul>
			<li>Run the following command to make sure Jupyter Notebook/Lab knows your new environment.</li>
		</ul>
	</li>
</ul>
<pre class="rainbow" data-language="ruby">python -m ipykernel install --user --name dojo-env --display-name "Python (dojo-env)"
</pre>
<h2></h2>
<h2>Testing Your New Environment</h2>
<ul>
	<li>From the same terminal window, <strong>start jupyter notebook</strong> (run <code>jupyter notebook</code> in
		your terminal) </li>
	<li><strong>Open the test notebook for your OS (windows vs mac).</strong>
		<ul>
			<li> EnvironmentTester-Mac.ipynb or EnvironmentTester-Windows.ipynb </li>
		</ul>
	</li>
	<li><strong>Select the Kernel Menu &gt; Restart and Run All. </strong>
		<ul>
			<li>The notebook should run all the way to the end.<ul>
					<li> If it doesn't, contact your instructor for assistance.</li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
<h2>Bonus: Jupyter Lab</h2>
<p>Your new dojo-env also includes jupyter lab. It is very similar to jupyter notebook, but has a more fleshed out user
	interface that is more similar to Colab than jupyter notebook.</p>
<p>To start jupyter lab run the following command:</p>
<pre class="rainbow" data-language="ruby">jupyter lab</pre>
<h1></h1>
<h1>Cheat Sheet/Summary Steps</h1>
<p>1. Clone repo or Fetch &amp; Pull: <a
		href="https://github.com/coding-dojo-data-science/dojo-env-setup">https://github.com/coding-dojo-data-science/dojo-env-setup<br></a>
</p>
<p>2. Open in Terminal/GitBash.</p>
<p>Execute the following commands:</p>
<pre class="rainbow" data-language="ruby">## 1. Deactivate dojo-env 
conda activate base
# Windows users may need to use "source activate base"
## 2. Remove dojo-env
conda remove --name dojo-env --all
# press y to confirm
## 3. Create new environment
# run ONE of the following (depending on you computer)
conda env create -f environment_mac_mchip.yml
conda env create -f environment_mac_intel.yml
conda env create -f environment_windows.yml
## Wait patiently, once completed, activate new env
conda activate dojo-env
# windows users may need "source activate dojo-env"
## Add dojo-env kernel to jupyter 
python -m ipykernel install --user --name dojo-env --display-name "Python (dojo-env)"
## Boot up jupyter notebook 
jupyter notebook 
# OR If you previously follwed  "3. Setting dojo-env as your default"
jnb
## Read Final step below code cell
</pre>
<ul>
	<li><strong>Final step: </strong>Open and run the appropriate environment testing notebook for your OS:<ul>
			<li>"EnvironmentTester-mac.ipynb"</li>
			<li>"EnvironmentTester-windows.ipynb"</li>
		</ul>
	</li>
	<li>Notify a TA or instructor if the notebook does not successfully run ALL cells.</li>
</ul>
<h2>Enjoy your new dojo-env!</h2>
<h1><a href="https://github.com/coding-dojo-data-science/dojo-env-setup/tree/testing#new-installations"
		id="user-content-new-installations" class="anchor" aria-hidden="true"></a>
	<p><a href="https://github.com/coding-dojo-data-science/dojo-env-setup/tree/testing#new-installations"
			id="user-content-new-installations" class="anchor" aria-hidden="true"></a></p>
</h1>
<p> <br> </p>